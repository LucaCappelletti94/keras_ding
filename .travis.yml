dist: trusty
sudo: true
git:
  depth: false
addons:
  sonarcloud:
    organization: lucacappelletti94-github
    token:
      secure: ASXjZ8tiIIwI3dOvPmlfdV3N9tfv8yAN2KImWoFVxLXYFFZmrHxMTH8vxHqaHt48slqIgOGYoOTMPez4YuSalwkwXSKP12+HubyMVJf+6UkSshIqR7HGjYep4aavjThoZ7txSXnrVkzHnxN7m4trMK9w6BneMYpmFZnxMREi4hYhBF8zFVe/idQXTnggfyaXGM+7Dz+kNfub4ra6qAJNO8Gpfu2GMdcz4531Pe+DNxCZ0Afqb4R63Z35gNq0m2gHp32OUGGmiDo/ZntCTEfovexrog0lHLb4JTOLoEHvKfN0z4SR4v+TzZ5KrzgjiSij9RA3tLzbIX8tulXHrImAY3O/PUWVJwX3vzX3/urgGxzD1KWjcDks9YV2Pvog2LnFQAdhNAdNui1Pg5fCYyvSdFOAQIlFM2ODTDMDtOmvKTMKWkhSUiS4WTleOQFxF5lxntUJJzgQRlCUQQX6Xis6IMaCPn6JLvM41/7hjVcS/kRV7rJZ6pDn2x+02mwcFgT3M1ED0Z9lQgPGz68YSvcAILJG5W3Y1w2Gj2JvN25qQPTEEm+UHlw45Pr8xfLg9amczjfBy/KLH5+A0fHYYYkpyE7HjQQy7dSNqXIqRQqPBvwwPN0YMVP4+IpFDu+hdMudIbFGPCMyHo7uBows6ou2mxnRselK7lFBwSkt8yQmbbs=
  apt:
    packages:
      - libgstreamer1.0
      - libgirepository1.0-dev
      - gcc
      - libcairo2-dev
      - pkg-config
      - python3-dev
      - gir1.2-gtk-3.0
language: python
python:
- '3.6'
before_install:
- pip3 install pycairo
- pip install tensorflow
- pip install --upgrade pytest
install:
- pip install .[test]
before_script:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
after_script:
- "./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"
script:
- rm -rf .coverage
- coverage erase
- pytest --cov=keras_ding --cov-report xml:coverage.xml
- coverage combine --append || true
- coverage report
- coverage xml
- sonar-scanner
after_success:
- coveralls
- python-codacy-coverage -r coverage.xml
env:
  global:
  - secure: NsM5U/BSYvLOfKsa95wo4X+MLvvknKblcH072D/0vyCh+xwvdxxZtTTtRH4L+BlSSAg5PDVbxV6+KiUV0t7myNXDUugmeoVSQjIu5V1B0BhRh/1LoIuJD30ojW20d2GkQrLhIWfBxCFyc7QM6GJAAaTC/bA3sDYzmRJXEQZMuz1S+bmuW/UK8Mg2F76tLevqQka030QLQU/rrpb4EnKTbwm8pvHTZYOhfpx5SB4zw6nyPeopN/AozO5vdyIPDSwCaYwQHjrzi4SIqOlA4ObNNUajNj2r8RmYSjt3X+PevP47pncTrXPKiqL5d9agkf0p5o1Fz9cmAZ158umc0gg+Q6XHrNDqmizmRSxtD1ujUKaBaeMIe3yOOK9s8/c3uIsje+sPertu18hj6LWrBNHFd7kAOV+/pXPCanTvD+ckbwIk20ymDQR1EsZWs2bC9vPIsAbkR5KvgJk2H3wAzNf2s6JfN5tj3ayDAqrZFFMUBlO8c7EUV0NWnhqAWisTpbo2Vo8YTx9jxj1QP2OWtrPh+7NAKB7AUlzqQIa4s7+o2PYq/643mmZmMNvxyFEaSac8++ZO/fg/dP/0QI6HPOe8bqicakmLOKQH8hw7VaFN6gxUdcjOKaQjkR/qV/EA15N0dSNB3zk8CxukR2nVlC1Ctf4OdPl9SUdKWK87ijPMjUo=
  - secure: prIL+yam6GhYeiyaMweOvZGjdQ62fxIWOatOqPfHYYsRkIE0AaxSXfLW4Q+/K4tqNU7YMRMovEyqmZHkK8FnuXcuatxGJNLkRruxhxV+7mfgCIem5WEBev5rYouhBfbVqeU2LjJF9H/NidUfisbt3Tm1OG2IglMv8VAg+pTDDmTwN0uZi1Pi4Vn3GYkZ5HnxX9/D2Re0U8iXW7wP5M34w3i7FEOIGvhcJDBTO0JHOr81tZigfgno7QkIU+xy/lBiJlWZ7K31xaWf3lx89UXVOfkHPxgtJQqa8RRqJ70pMCTWncD4XoVmJnaTXyjLp8roBLk0SS9oVLOGGsyHEia9kmDgabJMUjrUsZc+cw4CQ2uBmOzZc1mQG+aTRZXin0naTuRHiNvNrkw+TUVS9SFadK90sBQcyWGF9aKO0YFUWQ6wCp1rP7SNiQxmmqB7DUzsaH1yEndOD+BNznvYzdkGme9UzGZkGjTHBpG1IZTpUyKBPxMQdAqtvEv+lftOEmrA/+R9X96vbu2NoTZft2YzNKb9DDe0xcnNX4LCktHZO7Vj7KNXABdrytePvxVa1eEcU4RRzsXziYEpRz00d2DgSRcNOrU8mefR8iLSG2nvcbPGVyZ/HXeGMpiKFl6FWjyZ7FdO2eRA2wulPOPY00ZSG7qAS3JOGzKflL6/gFnB3No=
